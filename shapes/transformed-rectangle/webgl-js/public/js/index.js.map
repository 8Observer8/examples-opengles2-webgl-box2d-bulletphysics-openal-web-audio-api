{"version":3,"file":"index.js","sources":["../../src/webgl-context.js","../../src/shader-program.js","../../src/index.js"],"sourcesContent":["export let gl = null;\r\n\r\nexport function initWebGLContext(canvasName) {\r\n    const canvas = document.getElementById(canvasName);\r\n    if (canvas === null) {\r\n        console.log(`Failed to get a canvas element with the name \"${canvasName}\"`);\r\n        return false;\r\n    }\r\n    gl = canvas.getContext(\"webgl\", { alpha: false, premultipliedAlpha: false });\r\n    return true;\r\n}\r\n","import { gl } from \"./webgl-context.js\";\r\n\r\nexport default async function createProgram(path, vertShaderFileName,\r\n    fragShaderFileName) //\r\n{\r\n    let response = await fetch(path + vertShaderFileName);\r\n    const vertShaderSource = await response.text();\r\n    response = await fetch(path + fragShaderFileName);\r\n    const fragShaderSource = await response.text();\r\n\r\n    const vShader = gl.createShader(gl.VERTEX_SHADER);\r\n    gl.shaderSource(vShader, vertShaderSource);\r\n    gl.compileShader(vShader);\r\n    let ok = gl.getShaderParameter(vShader, gl.COMPILE_STATUS);\r\n    if (!ok) {\r\n        console.log(`${vertShaderFileName}: ${gl.getShaderInfoLog(vShader)}`);\r\n        return null;\r\n    };\r\n\r\n    const fShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    gl.shaderSource(fShader, fragShaderSource);\r\n    gl.compileShader(fShader);\r\n    ok = gl.getShaderParameter(fShader, gl.COMPILE_STATUS);\r\n    if (!ok) {\r\n        console.log(`${fragShaderFileName}: ${gl.getShaderInfoLog(fShader)}`);\r\n        return null;\r\n    };\r\n\r\n    const program = gl.createProgram();\r\n    gl.attachShader(program, vShader);\r\n    gl.attachShader(program, fShader);\r\n    gl.linkProgram(program);\r\n    ok = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n    if (!ok) {\r\n        console.log(`Link error with shaders ${vertShaderFileName}` +\r\n            ` and ${fragShaderFileName}`);\r\n        console.log(gl.getProgramInfoLog(program));\r\n        return null;\r\n    };\r\n    gl.useProgram(program);\r\n\r\n    return program;\r\n}\r\n","import { glMatrix, mat4, vec3 } from \"gl-matrix\";\r\nimport { gl, initWebGLContext } from \"./webgl-context.js\";\r\nimport createProgram from \"./shader-program.js\";\r\n\r\nlet aPositionLocation, uMvpMatrixLocation, vertPosBuffer;\r\n\r\n// Set up the model-view-projection matrix\r\nconst mvpMatrix = mat4.create();\r\nconst modelMatrix = mat4.create();\r\nconst viewMatrix = mat4.create();\r\nconst projMatrix = mat4.create();\r\nconst projViewMatrix = mat4.create();\r\nmat4.ortho(projMatrix, 0, 100, 0, 100, 1, -1);\r\nmat4.lookAt(viewMatrix, [0, 0, 1], [0, 0, 0], [0, 1, 0]);\r\n\r\nasync function init() {\r\n    if (!initWebGLContext(\"renderCanvas\")) {\r\n        return;\r\n    }\r\n\r\n    const shaderProgram = await createProgram(\"assets/shaders/\",\r\n        \"color.vert\", \"color.frag\");\r\n\r\n    const vertPositions = [\r\n        -0.5, -0.5,\r\n        0.5, -0.5,\r\n        -0.5, 0.5,\r\n        0.5, 0.5\r\n    ];\r\n    vertPosBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertPosBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertPositions), gl.STATIC_DRAW);\r\n    // Set up the position attribute\r\n    aPositionLocation = gl.getAttribLocation(shaderProgram, \"aPosition\");\r\n\r\n    uMvpMatrixLocation = gl.getUniformLocation(shaderProgram, \"uMvpMatrix\");\r\n\r\n    gl.clearColor(0.188, 0.22, 0.255, 1);\r\n    draw();\r\n}\r\n\r\ninit();\r\n\r\nfunction draw() {\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertPosBuffer);\r\n    gl.vertexAttribPointer(aPositionLocation, 2, gl.FLOAT, false, 0, 0);\r\n    gl.enableVertexAttribArray(aPositionLocation);\r\n\r\n    mat4.identity(modelMatrix);\r\n    mat4.mul(projViewMatrix, projMatrix, viewMatrix);\r\n    mat4.translate(modelMatrix, modelMatrix, [50, 50, 0]);\r\n    mat4.rotateZ(modelMatrix, modelMatrix, glMatrix.toRadian(10));\r\n    mat4.scale(modelMatrix, modelMatrix, [80, 10, 1]);\r\n    mat4.mul(mvpMatrix, projViewMatrix, modelMatrix);\r\n    gl.uniformMatrix4fv(uMvpMatrixLocation, false, mvpMatrix);\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n}\r\n"],"names":[],"mappings":"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"}